<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Accessing submission data via the OData pathway.
">
<title>Accessing the OData API • ruODK</title>
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Accessing the OData API">
<meta property="og:description" content="Accessing submission data via the OData pathway.
">
<meta property="og:image" content="https://docs.ropensci.org/ruODK/reference/figures/ruODK2.png">
<meta property="og:image:alt" content="An R Client for the ODK Central API">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@florianm">
<meta name="twitter:site" content="@rOpenSci">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">ruODK</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/comparison.html">Comparison of related software packages</a>
    <a class="dropdown-item" href="../articles/odata-api.html">Accessing the OData API</a>
    <a class="dropdown-item" href="../articles/restful-api.html">Accessing the RESTful API</a>
    <a class="dropdown-item" href="../articles/setup.html">Setup</a>
    <a class="dropdown-item" href="../articles/spatial.html">Spatial data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/ruODK/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="odata-api_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="odata-api_files/jsoneditor-0.18.7/jsoneditor.min.js"></script><script src="odata-api_files/jsonedit-binding-4.0.0/jsonedit.js"></script><link href="odata-api_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="odata-api_files/datatables-binding-0.32/datatables.js"></script><link href="odata-api_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="odata-api_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="odata-api_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="odata-api_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="odata-api_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="odata-api_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="odata-api_files/leaflet-1.3.1/leaflet.js"></script><link href="odata-api_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="odata-api_files/proj4-2.6.2/proj4.min.js"></script><script src="odata-api_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="odata-api_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="odata-api_files/leaflet-binding-2.2.1/leaflet.js"></script><script src="odata-api_files/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script><script src="odata-api_files/leaflet-providers-plugin-2.2.1/leaflet-providers-plugin.js"></script><link href="odata-api_files/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet">
<script src="odata-api_files/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script><link href="odata-api_files/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet">
<link href="odata-api_files/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet">
<script src="odata-api_files/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script><script src="odata-api_files/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script><script src="odata-api_files/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Accessing the OData API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/ruODK/blob/HEAD/vignettes/odata-api.Rmd" class="external-link"><code>vignettes/odata-api.Rmd</code></a></small>
      <div class="d-none name"><code>odata-api.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This vignette requires the following packages:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT" class="external-link">DT</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/leaflet/" class="external-link">leaflet</a></span><span class="op">)</span></span>
<span><span class="co"># library(listviewer)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'tidyr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:magrittr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     extract</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'lubridate'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     date, intersect, setdiff, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/ruODK">ruODK</a></span><span class="op">)</span></span></code></pre></div>
<!-- TODO split out vignettes -->
<!-- * This vignette: the typical workflow -->
<!-- * New vignette: spatial is not special -->
<!-- * New vignette: DIY rectangling -->
<!-- * New vignette: data visualisation (refer to that from odata and restful api) -->
<p>This vignette demonstrates <code>ruODK</code>’s workflow to extract data from ODK Central’s OData service endpoint, and to prepare the data and the media attachments for further analysis and visualisation.</p>
<p>The demonstrated workflow is roughly equivalent to ODK Central’s “Export all data”, which downloads all submissions and all repeating subgroups as CSV spreadsheets, and all media attachments in a local subfolder “attachments”.</p>
<p>An alternative pathway to getting data out of ODK Central is to use the REST API as documented (with live examples in multiple programming languages) at the <a href="https://docs.getodk.org/central-api/" class="external-link">ODK Central API docs</a>.</p>
<div class="section level2">
<h2 id="configure-ruodk">Configure ruODK<a class="anchor" aria-label="anchor" href="#configure-ruodk"></a>
</h2>
<p>The OData service URL is shown in the form’s “Submissions” tab &gt; “Analyse via OData” on ODK Central. It contains base URL, project ID, and form ID and is used by <code><a href="../reference/ru_setup.html">ruODK::ru_setup()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ODK Central's OData URL contains base URL, project ID, and form ID</span></span>
<span><span class="co"># ODK Central credentials can live in .Renviron</span></span>
<span><span class="co"># See vignette("setup") for setup and authentication options.</span></span>
<span><span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/ru_setup.html">ru_setup</a></span><span class="op">(</span></span>
<span>  svc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ODKC_TEST_SVC"</span><span class="op">)</span>,</span>
<span>  un <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ODKC_TEST_UN"</span><span class="op">)</span>,</span>
<span>  pw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"ODKC_TEST_PW"</span><span class="op">)</span>,</span>
<span>  tz <span class="op">=</span> <span class="st">"Australia/Perth"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># File attachment download location</span></span>
<span><span class="va">loc</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="st">"media"</span><span class="op">)</span></span></code></pre></div>
<p>This vignette shows how to access data, but under the bonnet uses the included package data. This allows to rebuild the vignette offline and without credentials to the originating ODK Central server.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Canned data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_svc"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_form_schema"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_meta"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_raw"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_raw_strata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_raw_taxa"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_data_strata"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"fq_data_taxa"</span><span class="op">)</span></span></code></pre></div>
<p>To extract data from the OData API endpoints, we have to:</p>
<ul>
<li>discover data endpoints from the OData service document,</li>
<li>inspect the metadata schema to infer data types,</li>
<li>download submissions from the data endpoints,</li>
<li>download media attachments and adjust their file paths to the downloaded files.</li>
</ul>
<div class="section level3">
<h3 id="odata-service-document">OData service document<a class="anchor" aria-label="anchor" href="#odata-service-document"></a>
</h3>
<p>Let’s start off with the service document.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fq_svc</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_service_get.html">odata_service_get</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The same data is included as example data <code>fq_svc</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fq_svc</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="left">kind</th>
<th align="left">url</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Submissions</td>
<td align="left">EntitySet</td>
<td align="left">Submissions</td>
</tr>
<tr class="even">
<td align="left">Submissions.vegetation_stratum</td>
<td align="left">EntitySet</td>
<td align="left">Submissions.vegetation_stratum</td>
</tr>
<tr class="odd">
<td align="left">Submissions.taxon_encounter</td>
<td align="left">EntitySet</td>
<td align="left">Submissions.taxon_encounter</td>
</tr>
</tbody>
</table>
<p><code>ruODK</code> provides the names and urls of the service endpoints as <code>tibble</code>. We see the main data available under the url <code>Submissions</code>, and repeating form groups called <code>taxon_encounter</code> and <code>vegetation_stratum</code> in the ODK form under the url <code>Submissions.taxon_encounter</code> and <code>Submissions.vegetation_stratum</code>, respectively.</p>
<p>The main value we get out of the service document are these names of the form groups, which can differ between forms.</p>
</div>
<div class="section level3">
<h3 id="odata-metadata-document">OData metadata document<a class="anchor" aria-label="anchor" href="#odata-metadata-document"></a>
</h3>
<p>Let’s inspect the form metadata to review our data schema. While we can download the submission data without it, the metadata document contains information about field data types and attachment names.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fq_meta</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_metadata_get.html">odata_metadata_get</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"listviewer"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">listviewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/listviewer/man/jsonedit.html" class="external-link">jsonedit</a></span><span class="op">(</span><span class="va">fq_meta</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/ru_msg_info.html">ru_msg_info</a></span><span class="op">(</span><span class="st">"Please install package listviewer!"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Loading required namespace: listviewer</span></span></code></pre></div>
<div class="jsonedit html-widget html-fill-item" id="htmlwidget-d0bf1fa2ad109e5fedf3" style="width:672px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-d0bf1fa2ad109e5fedf3">{"x":{"data":{"Edmx":{"DataServices":{"Schema":{"ComplexType":{"Property":[],"Property.1":[],"Property.2":[],"Property.3":[],"Property.4":[],"Property.5":[],"Property.6":[],"Property.7":[],"Property.8":[],"Property.9":[],"Property.10":[]},"EnumType":{"Member":[],"Member.1":[]},"EnumType.1":{"Member":[],"Member.1":[],"Member.2":[],"Member.3":[]}},"Schema.1":{"EntityType":{"Key":{"PropertyRef":[]},"Property":[],"Property.1":[],"Property.2":[],"Property.3":[],"Property.4":[],"Property.5":[],"Property.6":[],"Property.7":[],"NavigationProperty":[],"Property.8":[],"NavigationProperty.1":[],"Property.9":[]},"EntityType.1":{"Key":{"PropertyRef":[]},"Property":[],"Property.1":[],"Property.2":[],"Property.3":[],"Property.4":[],"Property.5":[],"Property.6":[],"Property.7":[],"Property.8":[]},"EntityType.2":{"Key":{"PropertyRef":[]},"Property":[],"Property.1":[],"Property.2":[],"Property.3":[],"Property.4":[],"Property.5":[],"Property.6":[],"Property.7":[]},"ComplexType":{"Property":[]},"ComplexType.1":{"Property":[],"Property.1":[],"Property.2":[]},"ComplexType.2":{"Property":[],"Property.1":[]},"ComplexType.3":{"Property":[],"Property.1":[],"Property.2":[],"Property.3":[]},"EntityContainer":{"EntitySet":{"Annotation":[],"Annotation.1":[],"Annotation.2":{"Record":{"PropertyValue":[]}},"Annotation.3":{"Record":{"PropertyValue":{"Collection":{"String":["eq"]}}}},"Annotation.4":{"Record":{"PropertyValue":[],"PropertyValue.1":[],"PropertyValue.2":{"Collection":{"PropertyPath":["meta"],"PropertyPath.1":["encounter_start_datetime"],"PropertyPath.2":["reporter"],"PropertyPath.3":["device_id"],"PropertyPath.4":["location"],"PropertyPath.5":["habitat"],"PropertyPath.6":["vegetation_stratum"],"PropertyPath.7":["perimeter"],"PropertyPath.8":["taxon_encounter"],"PropertyPath.9":["encounter_end_datetime"]}}}},"Annotation.5":{"Record":{"PropertyValue":[]}},"Annotation.6":{"Record":{"PropertyValue":[]}}},"EntitySet.1":["\n        "],"EntitySet.2":["\n        "]}}}}},"options":{"mode":"tree","modes":["text","tree","table"]}},"evals":[],"jsHooks":[]}</script><p>As an alternative to the OData metadata document, ODK Central also offers form metadata as a much cleaner JSON document, which <code>ruODK</code> can read and parse into a clean <code>tibble</code> of field type, name, and path.</p>
<p><code>ruODK</code> uses this introspection to parse submission data.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fq_form_schema</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/form_schema.html">form_schema</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fq_form_schema</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="31%">
<col width="19%">
<col width="5%">
<col width="4%">
<col width="8%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th align="left">path</th>
<th align="left">name</th>
<th align="left">type</th>
<th align="left">binary</th>
<th align="left">selectMultiple</th>
<th align="left">ruodk_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">/meta</td>
<td align="left">meta</td>
<td align="left">structure</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">meta</td>
</tr>
<tr class="even">
<td align="left">/meta/instanceID</td>
<td align="left">instanceID</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">meta_instance_id</td>
</tr>
<tr class="odd">
<td align="left">/encounter_start_datetime</td>
<td align="left">encounter_start_datetime</td>
<td align="left">dateTime</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">encounter_start_datetime</td>
</tr>
<tr class="even">
<td align="left">/reporter</td>
<td align="left">reporter</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">reporter</td>
</tr>
<tr class="odd">
<td align="left">/device_id</td>
<td align="left">device_id</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">device_id</td>
</tr>
<tr class="even">
<td align="left">/location</td>
<td align="left">location</td>
<td align="left">structure</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">location</td>
</tr>
<tr class="odd">
<td align="left">/location/area_name</td>
<td align="left">area_name</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">location_area_name</td>
</tr>
<tr class="even">
<td align="left">/location/quadrat_photo</td>
<td align="left">quadrat_photo</td>
<td align="left">binary</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">location_quadrat_photo</td>
</tr>
<tr class="odd">
<td align="left">/location/corner1</td>
<td align="left">corner1</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">location_corner1</td>
</tr>
<tr class="even">
<td align="left">/habitat</td>
<td align="left">habitat</td>
<td align="left">structure</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">habitat</td>
</tr>
<tr class="odd">
<td align="left">/habitat/morphological_type</td>
<td align="left">morphological_type</td>
<td align="left">select1</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">habitat_morphological_type</td>
</tr>
<tr class="even">
<td align="left">/habitat/morphological_type_photo</td>
<td align="left">morphological_type_photo</td>
<td align="left">binary</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">habitat_morphological_type_photo</td>
</tr>
<tr class="odd">
<td align="left">/vegetation_stratum</td>
<td align="left">vegetation_stratum</td>
<td align="left">repeat</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vegetation_stratum</td>
</tr>
<tr class="even">
<td align="left">/vegetation_stratum/nvis_level3_broad_floristic_group</td>
<td align="left">nvis_level3_broad_floristic_group</td>
<td align="left">select1</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vegetation_stratum_nvis_level3_broad_floristic_group</td>
</tr>
<tr class="odd">
<td align="left">/vegetation_stratum/max_height_m</td>
<td align="left">max_height_m</td>
<td align="left">decimal</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vegetation_stratum_max_height_m</td>
</tr>
<tr class="even">
<td align="left">/vegetation_stratum/foliage_cover</td>
<td align="left">foliage_cover</td>
<td align="left">select1</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vegetation_stratum_foliage_cover</td>
</tr>
<tr class="odd">
<td align="left">/vegetation_stratum/dominant_species_1</td>
<td align="left">dominant_species_1</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vegetation_stratum_dominant_species_1</td>
</tr>
<tr class="even">
<td align="left">/vegetation_stratum/dominant_species_2</td>
<td align="left">dominant_species_2</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vegetation_stratum_dominant_species_2</td>
</tr>
<tr class="odd">
<td align="left">/vegetation_stratum/dominant_species_3</td>
<td align="left">dominant_species_3</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vegetation_stratum_dominant_species_3</td>
</tr>
<tr class="even">
<td align="left">/vegetation_stratum/dominant_species_4</td>
<td align="left">dominant_species_4</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">vegetation_stratum_dominant_species_4</td>
</tr>
<tr class="odd">
<td align="left">/perimeter</td>
<td align="left">perimeter</td>
<td align="left">structure</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">perimeter</td>
</tr>
<tr class="even">
<td align="left">/perimeter/corner2</td>
<td align="left">corner2</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">perimeter_corner2</td>
</tr>
<tr class="odd">
<td align="left">/perimeter/corner3</td>
<td align="left">corner3</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">perimeter_corner3</td>
</tr>
<tr class="even">
<td align="left">/perimeter/corner4</td>
<td align="left">corner4</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">perimeter_corner4</td>
</tr>
<tr class="odd">
<td align="left">/perimeter/mudmap_photo</td>
<td align="left">mudmap_photo</td>
<td align="left">binary</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">perimeter_mudmap_photo</td>
</tr>
<tr class="even">
<td align="left">/taxon_encounter</td>
<td align="left">taxon_encounter</td>
<td align="left">repeat</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">taxon_encounter</td>
</tr>
<tr class="odd">
<td align="left">/taxon_encounter/field_name</td>
<td align="left">field_name</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">taxon_encounter_field_name</td>
</tr>
<tr class="even">
<td align="left">/taxon_encounter/photo_in_situ</td>
<td align="left">photo_in_situ</td>
<td align="left">binary</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">taxon_encounter_photo_in_situ</td>
</tr>
<tr class="odd">
<td align="left">/taxon_encounter/taxon_encounter_location</td>
<td align="left">taxon_encounter_location</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">taxon_encounter_taxon_encounter_location</td>
</tr>
<tr class="even">
<td align="left">/taxon_encounter/life_form</td>
<td align="left">life_form</td>
<td align="left">select1</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">taxon_encounter_life_form</td>
</tr>
<tr class="odd">
<td align="left">/taxon_encounter/voucher_specimen_barcode</td>
<td align="left">voucher_specimen_barcode</td>
<td align="left">barcode</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">taxon_encounter_voucher_specimen_barcode</td>
</tr>
<tr class="even">
<td align="left">/taxon_encounter/voucher_specimen_label</td>
<td align="left">voucher_specimen_label</td>
<td align="left">string</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">taxon_encounter_voucher_specimen_label</td>
</tr>
<tr class="odd">
<td align="left">/encounter_end_datetime</td>
<td align="left">encounter_end_datetime</td>
<td align="left">dateTime</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">encounter_end_datetime</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="odata-submission-data-documents">OData submission data documents<a class="anchor" aria-label="anchor" href="#odata-submission-data-documents"></a>
</h3>
<p>Now let’s download the form submissions and, separately, repeating form groups. <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code> defaults to download the submission data, parse it into a tidy tibble, parses dates and datetimes, downloads and links file attachments, and handles spatial datatypes.</p>
<p>This vignette is built with canned data, so the verbose messages are not shown.</p>
<p>With <code>wkt=TRUE</code>, we’ll receive spatial types as Well Known Text, which <code>ruODK</code> parses as plain text. With <code>wkt=FALSE</code> (the default), we’ll receive spatial types as GeoJSON, which <code>ruODK</code> parses into a nested list. <code>ruODK</code> retains the original spatial field, and annotates the data with extracted longitude, latitude, altitude, and (where given) accuracy. These additional fields are prefixed with the original field name to prevent name collisions between possibly multiple location fields.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fq_data</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_get.html">odata_submission_get</a></span><span class="op">(</span></span>
<span>  table <span class="op">=</span> <span class="va">fq_svc</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  local_dir <span class="op">=</span> <span class="va">loc</span>,</span>
<span>  wkt <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fq_data_strata</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_get.html">odata_submission_get</a></span><span class="op">(</span></span>
<span>  table <span class="op">=</span> <span class="va">fq_svc</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  local_dir <span class="op">=</span> <span class="va">loc</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fq_data_taxa</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_get.html">odata_submission_get</a></span><span class="op">(</span></span>
<span>  table <span class="op">=</span> <span class="va">fq_svc</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>  local_dir <span class="op">=</span> <span class="va">loc</span>,</span>
<span>  wkt <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="detour-data-rectangling">Detour: Data rectangling<a class="anchor" aria-label="anchor" href="#detour-data-rectangling"></a>
</h2>
<!-- TODO: rewrite -->
<!-- * odata_submission_get(parse=F) -->
<!-- * odata_submission_rectangle(form_schema=fs) -->
<!-- * handle_ru_{datetimes, attachments, geopoints, geotraces, geoshapes} -->
<p>The function <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code> received the original XML response as a nested list of lists. To analyse and visualise the data, this nested list of lists must be transformed into a rectangular shape. The function <code><a href="../reference/odata_submission_rectangle.html">ruODK::odata_submission_rectangle()</a></code> is used internally to recursively un-nest list columns using <code><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html" class="external-link">tidyr::unnest_wider()</a></code>. Unnamed columns, notably the anonymous lat/lon/alt coordinates, are named automatically to become unique (a feature of <code>tidyr::unnest_*()</code>), and then sanitised using the helper <code><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">janitor::clean_names()</a></code>.</p>
<p>By default, form group names are used as prefix to the field names. This behaviour can be disabled by handing the argument <code>names_sep=NULL</code> to <code><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html" class="external-link">tidyr::unnest_wider()</a></code> through running <code>ruODK::odata_submission_get() %&gt;% ruODK::odata_submission_rectangle(names_sep = NULL)</code>.</p>
<p>The vectorised function <code><a href="../reference/attachment_get.html">ruODK::attachment_get()</a></code> is then used internally to download and link attachments like photos and other media to a local, relative path. This will take some time during the first run. Once the files exist locally, the download will be skipped.</p>
<p>When used through <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code>, <code>ruODK</code> will introspect the form schema to detect and then parse media attachment fields automatically. When used manually, field names of media attachment fields can be (partially or fully) specified, see <code>??ruODK::attachment_get()</code>.</p>
<p>The date formats are parsed from ISO8601 timestamps into POSIXct objects with <code><a href="../reference/handle_ru_datetimes.html">ruODK::handle_ru_datetimes()</a></code>. We use our local timezone (GMT+08) in this example. <code>ruODK</code> introspects the form schema to detect and then parse date and datetime fields automatically.</p>
<p>The repeated subgroup <code>taxon_encounter</code> is left joined to the main submission data to receive a (repeated) copy of the main submission data (such as location, time and habitat description). We will do the same to the other repeated subgroup <code>vegetation_stratum</code>.</p>
<p>For clarity, we enable verbose messages from <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code> and preserve the message output in the code chunk options with <code>message=TRUE</code>. In real-world use cases, messages can be disabled through the chunk option <code>message=FALSE</code>.</p>
<p>We use a custom local path for attachments (<code>loc</code>). This results in a smaller installed package size for <code>ruODK</code>, as it shares the attachment files with the other vignettes. The default is a local folder <code>media</code>.</p>
<p>The raw and unparsed example data is provided as data objects <code>fq_raw</code> (main submissions of form Flora Quadrat 0.4), <code>fq_raw_taxa</code> (repeated group “Taxon Encounter” within a Flora Quadrat), and <code>fq_raw_strata</code> (repeated group “Vegetation Stratum” within a Flora Quadrat).</p>
<p>The parsed versions are included as data objects <code>fq_data</code>, <code>fq_data_strata</code>, and <code>fq_data_taxa</code>. To enable users without ODK Central credentials to build this vignette (e.g. on package installation with <code>build_vignettes=TRUE</code>), we show the real functions (such as <code><a href="../reference/odata_submission_get.html">ruODK::odata_submission_get()</a></code>), but do not evaluate them. Instead, we use “canned data”. The <code>ruODK</code> test suite ensures that canned data are equivalent to live data.</p>
<p>The result of this code chunk should be exactly the same as the compact version with <code>odata_submission_get(parse=TRUE)</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Candidates for ruODK::handle_ru_datetimes()</span></span>
<span><span class="va">fq_form_schema</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dateTime"</span>, <span class="st">"date"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="23%">
<col width="8%">
<col width="6%">
<col width="14%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th align="left">path</th>
<th align="left">name</th>
<th align="left">type</th>
<th align="left">binary</th>
<th align="left">selectMultiple</th>
<th align="left">ruodk_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">/encounter_start_datetime</td>
<td align="left">encounter_start_datetime</td>
<td align="left">dateTime</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">encounter_start_datetime</td>
</tr>
<tr class="even">
<td align="left">/encounter_end_datetime</td>
<td align="left">encounter_end_datetime</td>
<td align="left">dateTime</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">encounter_end_datetime</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Candidates for ruODK::handle_ru_attachments()</span></span>
<span><span class="va">fq_form_schema</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"binary"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="28%">
<col width="20%">
<col width="5%">
<col width="5%">
<col width="12%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th align="left">path</th>
<th align="left">name</th>
<th align="left">type</th>
<th align="left">binary</th>
<th align="left">selectMultiple</th>
<th align="left">ruodk_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">/location/quadrat_photo</td>
<td align="left">quadrat_photo</td>
<td align="left">binary</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">location_quadrat_photo</td>
</tr>
<tr class="even">
<td align="left">/habitat/morphological_type_photo</td>
<td align="left">morphological_type_photo</td>
<td align="left">binary</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">habitat_morphological_type_photo</td>
</tr>
<tr class="odd">
<td align="left">/perimeter/mudmap_photo</td>
<td align="left">mudmap_photo</td>
<td align="left">binary</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">perimeter_mudmap_photo</td>
</tr>
<tr class="even">
<td align="left">/taxon_encounter/photo_in_situ</td>
<td align="left">photo_in_situ</td>
<td align="left">binary</td>
<td align="left">TRUE</td>
<td align="left">NA</td>
<td align="left">taxon_encounter_photo_in_situ</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Candidates for ruODK::handle_ru_geopoints()</span></span>
<span><span class="va">fq_form_schema</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"geopoint"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="30%">
<col width="17%">
<col width="6%">
<col width="5%">
<col width="10%">
<col width="29%">
</colgroup>
<thead><tr class="header">
<th align="left">path</th>
<th align="left">name</th>
<th align="left">type</th>
<th align="left">binary</th>
<th align="left">selectMultiple</th>
<th align="left">ruodk_name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">/location/corner1</td>
<td align="left">corner1</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">location_corner1</td>
</tr>
<tr class="even">
<td align="left">/perimeter/corner2</td>
<td align="left">corner2</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">perimeter_corner2</td>
</tr>
<tr class="odd">
<td align="left">/perimeter/corner3</td>
<td align="left">corner3</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">perimeter_corner3</td>
</tr>
<tr class="even">
<td align="left">/perimeter/corner4</td>
<td align="left">corner4</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">perimeter_corner4</td>
</tr>
<tr class="odd">
<td align="left">/taxon_encounter/taxon_encounter_location</td>
<td align="left">taxon_encounter_location</td>
<td align="left">geopoint</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">taxon_encounter_taxon_encounter_location</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The raw submission data</span></span>
<span><span class="va">fq_raw</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_get.html">odata_submission_get</a></span><span class="op">(</span>table <span class="op">=</span> <span class="va">fq_svc</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, parse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">fq_strata</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_get.html">odata_submission_get</a></span><span class="op">(</span>table <span class="op">=</span> <span class="va">fq_svc</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, parse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">fq_taxa</span> <span class="op">&lt;-</span> <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_get.html">odata_submission_get</a></span><span class="op">(</span>table <span class="op">=</span> <span class="va">fq_svc</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>, parse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Parse main data</span></span>
<span><span class="va">fq_data</span> <span class="op">&lt;-</span> <span class="va">fq_raw</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_rectangle.html">odata_submission_rectangle</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_datetimes.html">handle_ru_datetimes</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geopoints.html">handle_ru_geopoints</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geotraces.html">handle_ru_geotraces</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geoshapes.html">handle_ru_geoshapes</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_attachments.html">handle_ru_attachments</a></span><span class="op">(</span><span class="va">fq_form_schema</span>, local_dir <span class="op">=</span> <span class="va">t</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Parse nested group "taxa"</span></span>
<span><span class="va">fq_data_taxa</span> <span class="op">&lt;-</span> <span class="va">fq_taxa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_rectangle.html">odata_submission_rectangle</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_datetimes.html">handle_ru_datetimes</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geopoints.html">handle_ru_geopoints</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geotraces.html">handle_ru_geotraces</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geoshapes.html">handle_ru_geoshapes</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_attachments.html">handle_ru_attachments</a></span><span class="op">(</span><span class="va">fq_form_schema</span>, local_dir <span class="op">=</span> <span class="va">t</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">fq_data</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"submissions_id"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Parse nested group "strata"</span></span>
<span><span class="va">fq_data_strata</span> <span class="op">&lt;-</span> <span class="va">fq_strata</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/odata_submission_rectangle.html">odata_submission_rectangle</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_datetimes.html">handle_ru_datetimes</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geopoints.html">handle_ru_geopoints</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geotraces.html">handle_ru_geotraces</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_geoshapes.html">handle_ru_geoshapes</a></span><span class="op">(</span><span class="va">fq_form_schema</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ruODK</span><span class="fu">::</span><span class="fu"><a href="../reference/handle_ru_attachments.html">handle_ru_attachments</a></span><span class="op">(</span><span class="va">fq_form_schema</span>, local_dir <span class="op">=</span> <span class="va">t</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">fq_data</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"submissions_id"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Note: A manually resized version of the original photos in this example live in the package source under <a href="https://github.com/ropensci/ruODK/tree/main/vignettes/media" class="external-link"><code>articles/media</code></a>. To minimise package size, they were resized with imagemagick:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> vignettes/media <span class="at">-type</span> f <span class="at">-exec</span> mogrify <span class="at">-resize</span> 200x150 {} <span class="dt">\\</span><span class="kw">;</span></span></code></pre></div>
<div class="section level3">
<h3 id="diy-rectangling">DIY rectangling<a class="anchor" aria-label="anchor" href="#diy-rectangling"></a>
</h3>
<p>For those wishing to go one step further, this section demonstrates the inner workings of <code>ruODK</code>, the recursive use of <code><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html" class="external-link">tidyr::unnest_wider()</a></code>.</p>
<p>The unnesting could also be done manually by building up a pipeline, which stepwise unnests each list column. This requires knowledge of the data structure, which can either be looked up from the metadata, or by inspecting the raw data, <code>fq_raw</code>.</p>
<p>The following command has been built by stepwise adding <code><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html" class="external-link">tidyr::unnest_wider()</a></code> expressions to the pipe until all list columns were eliminated.</p>
<p>The trailing <code><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible()</a></code> allows us to toggle parts of the pipe by catching the dangling <code>%&gt;%</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fq_data_diy</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">fq_raw</span><span class="op">$</span><span class="va">value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html" class="external-link">unnest_wider</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># 1. find list columns:</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html" class="external-link">unnest_wider</a></span><span class="op">(</span><span class="va">`__system`</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest_wider.html" class="external-link">unnest_wider</a></span><span class="op">(</span><span class="va">meta</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># add more lines here to unnest other form groups</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># 2. rename column names</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    uuid <span class="op">=</span> <span class="va">`__id`</span></span>
<span>    <span class="co"># add more columns, e.g.</span></span>
<span>    <span class="co"># longitude=`...1`, latitude=`...2`, altitude=`...3`</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="co"># 3. handle media attachments</span></span>
<span>  <span class="co"># dplyr::mutate(photo_1 = attachment_get(data_url, uuid, photo_1)) %&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="visualise-data">Visualise data<a class="anchor" aria-label="anchor" href="#visualise-data"></a>
</h2>
<!-- TODO: split out and show working examples for each vis (table, map, pivot, export) -->
<!-- for each data type (date, point, trace, shape) -->
<p>This section provides some examples of standard data visualisations.</p>
<div class="section level3">
<h3 id="datatable">Datatable<a class="anchor" aria-label="anchor" href="#datatable"></a>
</h3>
<p>The package <code>DT</code> provides an interactive (and searchable) datatable.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">fq_data</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-46da532e02a4fa9d6969" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-46da532e02a4fa9d6969">{"x":{"filter":"none","vertical":false,"data":[["1"],["uuid:46d3939a-8bc5-4084-9154-d043bc4d3239"],["2023-12-04T08:20:19Z"],[null],["collect:OHnydk6INUIfDHNl"],["\nTest 1"],["media/1701678074209.jpg"],["POINT (115.7747006 -31.895004 6.900000095367432)"],[115.7747006],[-31.895004],[6.900000095367432],["flat"],["media/1701678107041.jpg"],["POINT (115.7746704 -31.8949539 6.900000095367432)"],[115.7746704],[-31.8949539],[6.900000095367432],["POINT (115.7747255 -31.8950485 7.200000286102295)"],[115.7747255],[-31.8950485],[7.200000286102295],["POINT (115.7747159 -31.895046 6.900000095367432)"],[115.7747159],[-31.895046],[6.900000095367432],["media/1701678512568.jpg"],["2023-12-04T08:30:21Z"],["uuid:46d3939a-8bc5-4084-9154-d043bc4d3239"],["2023-12-04T08:30:26.154Z"],["2024-03-05T05:29:54.987Z"],["12"],["ruodk"],[5],[5],[null],["approved"],["collect:OHnydk6INUIfDHNl"],[0],[""],["Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/vegetation_stratum"],["Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/taxon_encounter"],["https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>meta_instance_id<\/th>\n      <th>encounter_start_datetime<\/th>\n      <th>reporter<\/th>\n      <th>device_id<\/th>\n      <th>location_area_name<\/th>\n      <th>location_quadrat_photo<\/th>\n      <th>location_corner1<\/th>\n      <th>location_corner1_longitude<\/th>\n      <th>location_corner1_latitude<\/th>\n      <th>location_corner1_altitude<\/th>\n      <th>habitat_morphological_type<\/th>\n      <th>habitat_morphological_type_photo<\/th>\n      <th>perimeter_corner2<\/th>\n      <th>perimeter_corner2_longitude<\/th>\n      <th>perimeter_corner2_latitude<\/th>\n      <th>perimeter_corner2_altitude<\/th>\n      <th>perimeter_corner3<\/th>\n      <th>perimeter_corner3_longitude<\/th>\n      <th>perimeter_corner3_latitude<\/th>\n      <th>perimeter_corner3_altitude<\/th>\n      <th>perimeter_corner4<\/th>\n      <th>perimeter_corner4_longitude<\/th>\n      <th>perimeter_corner4_latitude<\/th>\n      <th>perimeter_corner4_altitude<\/th>\n      <th>perimeter_mudmap_photo<\/th>\n      <th>encounter_end_datetime<\/th>\n      <th>id<\/th>\n      <th>system_submission_date<\/th>\n      <th>system_updated_at<\/th>\n      <th>system_submitter_id<\/th>\n      <th>system_submitter_name<\/th>\n      <th>system_attachments_present<\/th>\n      <th>system_attachments_expected<\/th>\n      <th>system_status<\/th>\n      <th>system_review_state<\/th>\n      <th>system_device_id<\/th>\n      <th>system_edits<\/th>\n      <th>system_form_version<\/th>\n      <th>vegetation_stratum_odata_navigation_link<\/th>\n      <th>taxon_encounter_odata_navigation_link<\/th>\n      <th>odata_context<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[8,9,10,14,15,16,18,19,20,22,23,24,32,33,37]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"meta_instance_id","targets":1},{"name":"encounter_start_datetime","targets":2},{"name":"reporter","targets":3},{"name":"device_id","targets":4},{"name":"location_area_name","targets":5},{"name":"location_quadrat_photo","targets":6},{"name":"location_corner1","targets":7},{"name":"location_corner1_longitude","targets":8},{"name":"location_corner1_latitude","targets":9},{"name":"location_corner1_altitude","targets":10},{"name":"habitat_morphological_type","targets":11},{"name":"habitat_morphological_type_photo","targets":12},{"name":"perimeter_corner2","targets":13},{"name":"perimeter_corner2_longitude","targets":14},{"name":"perimeter_corner2_latitude","targets":15},{"name":"perimeter_corner2_altitude","targets":16},{"name":"perimeter_corner3","targets":17},{"name":"perimeter_corner3_longitude","targets":18},{"name":"perimeter_corner3_latitude","targets":19},{"name":"perimeter_corner3_altitude","targets":20},{"name":"perimeter_corner4","targets":21},{"name":"perimeter_corner4_longitude","targets":22},{"name":"perimeter_corner4_latitude","targets":23},{"name":"perimeter_corner4_altitude","targets":24},{"name":"perimeter_mudmap_photo","targets":25},{"name":"encounter_end_datetime","targets":26},{"name":"id","targets":27},{"name":"system_submission_date","targets":28},{"name":"system_updated_at","targets":29},{"name":"system_submitter_id","targets":30},{"name":"system_submitter_name","targets":31},{"name":"system_attachments_present","targets":32},{"name":"system_attachments_expected","targets":33},{"name":"system_status","targets":34},{"name":"system_review_state","targets":35},{"name":"system_device_id","targets":36},{"name":"system_edits","targets":37},{"name":"system_form_version","targets":38},{"name":"vegetation_stratum_odata_navigation_link","targets":39},{"name":"taxon_encounter_odata_navigation_link","targets":40},{"name":"odata_context","targets":41}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">fq_data_taxa</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-5dd8aa28bac32c1be699" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5dd8aa28bac32c1be699">{"x":{"filter":"none","vertical":false,"data":[["1","2"],["Test species 1","Test species 6"],["media/1701678535420.jpg","media/1701678592627.jpg"],["POINT (115.7746951 -31.8950488 6.900000095367432)","POINT (115.7746873 -31.8950303 6.900000095367432)"],["w3.0_shrub","w1.0_trees_with_dominant_genus"],[null,null],["12345","1234567"],["b01d6ee02828d03ac94add930181aef3d8741ffa","637999c7be062003daf9bdb6cbf06322b5be70ce"],["uuid:46d3939a-8bc5-4084-9154-d043bc4d3239","uuid:46d3939a-8bc5-4084-9154-d043bc4d3239"],["https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions.taxon_encounter","https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions.taxon_encounter"],["uuid:46d3939a-8bc5-4084-9154-d043bc4d3239","uuid:46d3939a-8bc5-4084-9154-d043bc4d3239"],["2023-12-04T08:20:19Z","2023-12-04T08:20:19Z"],[null,null],["collect:OHnydk6INUIfDHNl","collect:OHnydk6INUIfDHNl"],["\nTest 1","\nTest 1"],["media/1701678074209.jpg","media/1701678074209.jpg"],["POINT (115.7747006 -31.895004 6.900000095367432)","POINT (115.7747006 -31.895004 6.900000095367432)"],[115.7747006,115.7747006],[-31.895004,-31.895004],[6.900000095367432,6.900000095367432],["flat","flat"],["media/1701678107041.jpg","media/1701678107041.jpg"],["POINT (115.7746704 -31.8949539 6.900000095367432)","POINT (115.7746704 -31.8949539 6.900000095367432)"],[115.7746704,115.7746704],[-31.8949539,-31.8949539],[6.900000095367432,6.900000095367432],["POINT (115.7747255 -31.8950485 7.200000286102295)","POINT (115.7747255 -31.8950485 7.200000286102295)"],[115.7747255,115.7747255],[-31.8950485,-31.8950485],[7.200000286102295,7.200000286102295],["POINT (115.7747159 -31.895046 6.900000095367432)","POINT (115.7747159 -31.895046 6.900000095367432)"],[115.7747159,115.7747159],[-31.895046,-31.895046],[6.900000095367432,6.900000095367432],["media/1701678512568.jpg","media/1701678512568.jpg"],["2023-12-04T08:30:21Z","2023-12-04T08:30:21Z"],["2023-12-04T08:30:26.154Z","2023-12-04T08:30:26.154Z"],["2024-03-05T05:29:54.987Z","2024-03-05T05:29:54.987Z"],["12","12"],["ruodk","ruodk"],[5,5],[5,5],[null,null],["approved","approved"],["collect:OHnydk6INUIfDHNl","collect:OHnydk6INUIfDHNl"],[0,0],["",""],["Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/vegetation_stratum","Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/vegetation_stratum"],["Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/taxon_encounter","Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/taxon_encounter"],["https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions","https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>field_name<\/th>\n      <th>photo_in_situ<\/th>\n      <th>taxon_encounter_location<\/th>\n      <th>life_form<\/th>\n      <th>voucher_specimen_barcode<\/th>\n      <th>voucher_specimen_label<\/th>\n      <th>id<\/th>\n      <th>submissions_id<\/th>\n      <th>odata_context.x<\/th>\n      <th>meta_instance_id<\/th>\n      <th>encounter_start_datetime<\/th>\n      <th>reporter<\/th>\n      <th>device_id<\/th>\n      <th>location_area_name<\/th>\n      <th>location_quadrat_photo<\/th>\n      <th>location_corner1<\/th>\n      <th>location_corner1_longitude<\/th>\n      <th>location_corner1_latitude<\/th>\n      <th>location_corner1_altitude<\/th>\n      <th>habitat_morphological_type<\/th>\n      <th>habitat_morphological_type_photo<\/th>\n      <th>perimeter_corner2<\/th>\n      <th>perimeter_corner2_longitude<\/th>\n      <th>perimeter_corner2_latitude<\/th>\n      <th>perimeter_corner2_altitude<\/th>\n      <th>perimeter_corner3<\/th>\n      <th>perimeter_corner3_longitude<\/th>\n      <th>perimeter_corner3_latitude<\/th>\n      <th>perimeter_corner3_altitude<\/th>\n      <th>perimeter_corner4<\/th>\n      <th>perimeter_corner4_longitude<\/th>\n      <th>perimeter_corner4_latitude<\/th>\n      <th>perimeter_corner4_altitude<\/th>\n      <th>perimeter_mudmap_photo<\/th>\n      <th>encounter_end_datetime<\/th>\n      <th>system_submission_date<\/th>\n      <th>system_updated_at<\/th>\n      <th>system_submitter_id<\/th>\n      <th>system_submitter_name<\/th>\n      <th>system_attachments_present<\/th>\n      <th>system_attachments_expected<\/th>\n      <th>system_status<\/th>\n      <th>system_review_state<\/th>\n      <th>system_device_id<\/th>\n      <th>system_edits<\/th>\n      <th>system_form_version<\/th>\n      <th>vegetation_stratum_odata_navigation_link<\/th>\n      <th>taxon_encounter_odata_navigation_link<\/th>\n      <th>odata_context.y<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[17,18,19,23,24,25,27,28,29,31,32,33,40,41,45]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"field_name","targets":1},{"name":"photo_in_situ","targets":2},{"name":"taxon_encounter_location","targets":3},{"name":"life_form","targets":4},{"name":"voucher_specimen_barcode","targets":5},{"name":"voucher_specimen_label","targets":6},{"name":"id","targets":7},{"name":"submissions_id","targets":8},{"name":"odata_context.x","targets":9},{"name":"meta_instance_id","targets":10},{"name":"encounter_start_datetime","targets":11},{"name":"reporter","targets":12},{"name":"device_id","targets":13},{"name":"location_area_name","targets":14},{"name":"location_quadrat_photo","targets":15},{"name":"location_corner1","targets":16},{"name":"location_corner1_longitude","targets":17},{"name":"location_corner1_latitude","targets":18},{"name":"location_corner1_altitude","targets":19},{"name":"habitat_morphological_type","targets":20},{"name":"habitat_morphological_type_photo","targets":21},{"name":"perimeter_corner2","targets":22},{"name":"perimeter_corner2_longitude","targets":23},{"name":"perimeter_corner2_latitude","targets":24},{"name":"perimeter_corner2_altitude","targets":25},{"name":"perimeter_corner3","targets":26},{"name":"perimeter_corner3_longitude","targets":27},{"name":"perimeter_corner3_latitude","targets":28},{"name":"perimeter_corner3_altitude","targets":29},{"name":"perimeter_corner4","targets":30},{"name":"perimeter_corner4_longitude","targets":31},{"name":"perimeter_corner4_latitude","targets":32},{"name":"perimeter_corner4_altitude","targets":33},{"name":"perimeter_mudmap_photo","targets":34},{"name":"encounter_end_datetime","targets":35},{"name":"system_submission_date","targets":36},{"name":"system_updated_at","targets":37},{"name":"system_submitter_id","targets":38},{"name":"system_submitter_name","targets":39},{"name":"system_attachments_present","targets":40},{"name":"system_attachments_expected","targets":41},{"name":"system_status","targets":42},{"name":"system_review_state","targets":43},{"name":"system_device_id","targets":44},{"name":"system_edits","targets":45},{"name":"system_form_version","targets":46},{"name":"vegetation_stratum_odata_navigation_link","targets":47},{"name":"taxon_encounter_odata_navigation_link","targets":48},{"name":"odata_context.y","targets":49}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">fq_data_strata</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-9c664b5c836d2ea28503" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9c664b5c836d2ea28503">{"x":{"filter":"none","vertical":false,"data":[["1","2"],["w3.0_shrub","w1.1_trees_rainforest"],[1,5],["70-30","10-5"],["Test species 1","Test species 5"],["Test species 2","Test species 6"],["Test species 3",null],["Test species 4",null],["3d5eac5dc38f05baf79185013b1cf280f43e2be6","75c6bc8ec4a8ed6fe40dfb8548e6502fbadf4e66"],["uuid:46d3939a-8bc5-4084-9154-d043bc4d3239","uuid:46d3939a-8bc5-4084-9154-d043bc4d3239"],["https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions.vegetation_stratum","https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions.vegetation_stratum"],["uuid:46d3939a-8bc5-4084-9154-d043bc4d3239","uuid:46d3939a-8bc5-4084-9154-d043bc4d3239"],["2023-12-04T08:20:19Z","2023-12-04T08:20:19Z"],[null,null],["collect:OHnydk6INUIfDHNl","collect:OHnydk6INUIfDHNl"],["\nTest 1","\nTest 1"],["media/1701678074209.jpg","media/1701678074209.jpg"],["POINT (115.7747006 -31.895004 6.900000095367432)","POINT (115.7747006 -31.895004 6.900000095367432)"],[115.7747006,115.7747006],[-31.895004,-31.895004],[6.900000095367432,6.900000095367432],["flat","flat"],["media/1701678107041.jpg","media/1701678107041.jpg"],["POINT (115.7746704 -31.8949539 6.900000095367432)","POINT (115.7746704 -31.8949539 6.900000095367432)"],[115.7746704,115.7746704],[-31.8949539,-31.8949539],[6.900000095367432,6.900000095367432],["POINT (115.7747255 -31.8950485 7.200000286102295)","POINT (115.7747255 -31.8950485 7.200000286102295)"],[115.7747255,115.7747255],[-31.8950485,-31.8950485],[7.200000286102295,7.200000286102295],["POINT (115.7747159 -31.895046 6.900000095367432)","POINT (115.7747159 -31.895046 6.900000095367432)"],[115.7747159,115.7747159],[-31.895046,-31.895046],[6.900000095367432,6.900000095367432],["media/1701678512568.jpg","media/1701678512568.jpg"],["2023-12-04T08:30:21Z","2023-12-04T08:30:21Z"],["2023-12-04T08:30:26.154Z","2023-12-04T08:30:26.154Z"],["2024-03-05T05:29:54.987Z","2024-03-05T05:29:54.987Z"],["12","12"],["ruodk","ruodk"],[5,5],[5,5],[null,null],["approved","approved"],["collect:OHnydk6INUIfDHNl","collect:OHnydk6INUIfDHNl"],[0,0],["",""],["Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/vegetation_stratum","Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/vegetation_stratum"],["Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/taxon_encounter","Submissions('uuid%3A46d3939a-8bc5-4084-9154-d043bc4d3239')/taxon_encounter"],["https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions","https://ruodk.getodk.cloud/v1/projects/1/forms/Flora-Quadrat-04.svc/$metadata#Submissions"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>nvis_level3_broad_floristic_group<\/th>\n      <th>max_height_m<\/th>\n      <th>foliage_cover<\/th>\n      <th>dominant_species_1<\/th>\n      <th>dominant_species_2<\/th>\n      <th>dominant_species_3<\/th>\n      <th>dominant_species_4<\/th>\n      <th>id<\/th>\n      <th>submissions_id<\/th>\n      <th>odata_context.x<\/th>\n      <th>meta_instance_id<\/th>\n      <th>encounter_start_datetime<\/th>\n      <th>reporter<\/th>\n      <th>device_id<\/th>\n      <th>location_area_name<\/th>\n      <th>location_quadrat_photo<\/th>\n      <th>location_corner1<\/th>\n      <th>location_corner1_longitude<\/th>\n      <th>location_corner1_latitude<\/th>\n      <th>location_corner1_altitude<\/th>\n      <th>habitat_morphological_type<\/th>\n      <th>habitat_morphological_type_photo<\/th>\n      <th>perimeter_corner2<\/th>\n      <th>perimeter_corner2_longitude<\/th>\n      <th>perimeter_corner2_latitude<\/th>\n      <th>perimeter_corner2_altitude<\/th>\n      <th>perimeter_corner3<\/th>\n      <th>perimeter_corner3_longitude<\/th>\n      <th>perimeter_corner3_latitude<\/th>\n      <th>perimeter_corner3_altitude<\/th>\n      <th>perimeter_corner4<\/th>\n      <th>perimeter_corner4_longitude<\/th>\n      <th>perimeter_corner4_latitude<\/th>\n      <th>perimeter_corner4_altitude<\/th>\n      <th>perimeter_mudmap_photo<\/th>\n      <th>encounter_end_datetime<\/th>\n      <th>system_submission_date<\/th>\n      <th>system_updated_at<\/th>\n      <th>system_submitter_id<\/th>\n      <th>system_submitter_name<\/th>\n      <th>system_attachments_present<\/th>\n      <th>system_attachments_expected<\/th>\n      <th>system_status<\/th>\n      <th>system_review_state<\/th>\n      <th>system_device_id<\/th>\n      <th>system_edits<\/th>\n      <th>system_form_version<\/th>\n      <th>vegetation_stratum_odata_navigation_link<\/th>\n      <th>taxon_encounter_odata_navigation_link<\/th>\n      <th>odata_context.y<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,18,19,20,24,25,26,28,29,30,32,33,34,41,42,46]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"nvis_level3_broad_floristic_group","targets":1},{"name":"max_height_m","targets":2},{"name":"foliage_cover","targets":3},{"name":"dominant_species_1","targets":4},{"name":"dominant_species_2","targets":5},{"name":"dominant_species_3","targets":6},{"name":"dominant_species_4","targets":7},{"name":"id","targets":8},{"name":"submissions_id","targets":9},{"name":"odata_context.x","targets":10},{"name":"meta_instance_id","targets":11},{"name":"encounter_start_datetime","targets":12},{"name":"reporter","targets":13},{"name":"device_id","targets":14},{"name":"location_area_name","targets":15},{"name":"location_quadrat_photo","targets":16},{"name":"location_corner1","targets":17},{"name":"location_corner1_longitude","targets":18},{"name":"location_corner1_latitude","targets":19},{"name":"location_corner1_altitude","targets":20},{"name":"habitat_morphological_type","targets":21},{"name":"habitat_morphological_type_photo","targets":22},{"name":"perimeter_corner2","targets":23},{"name":"perimeter_corner2_longitude","targets":24},{"name":"perimeter_corner2_latitude","targets":25},{"name":"perimeter_corner2_altitude","targets":26},{"name":"perimeter_corner3","targets":27},{"name":"perimeter_corner3_longitude","targets":28},{"name":"perimeter_corner3_latitude","targets":29},{"name":"perimeter_corner3_altitude","targets":30},{"name":"perimeter_corner4","targets":31},{"name":"perimeter_corner4_longitude","targets":32},{"name":"perimeter_corner4_latitude","targets":33},{"name":"perimeter_corner4_altitude","targets":34},{"name":"perimeter_mudmap_photo","targets":35},{"name":"encounter_end_datetime","targets":36},{"name":"system_submission_date","targets":37},{"name":"system_updated_at","targets":38},{"name":"system_submitter_id","targets":39},{"name":"system_submitter_name","targets":40},{"name":"system_attachments_present","targets":41},{"name":"system_attachments_expected","targets":42},{"name":"system_status","targets":43},{"name":"system_review_state","targets":44},{"name":"system_device_id","targets":45},{"name":"system_edits","targets":46},{"name":"system_form_version","targets":47},{"name":"vegetation_stratum_odata_navigation_link","targets":48},{"name":"taxon_encounter_odata_navigation_link","targets":49},{"name":"odata_context.y","targets":50}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DT::datatable(head(fq_data_diy))</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="map">Map<a class="anchor" aria-label="anchor" href="#map"></a>
</h3>
<p>The R package <code>leaflet</code> provides interactive maps.</p>
<p>Constructing label and popup requires knowledge of the dataset structure.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/leaflet.html" class="external-link">leaflet</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">800</span>, height <span class="op">=</span> <span class="fl">600</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addProviderTiles.html" class="external-link">addProviderTiles</a></span><span class="op">(</span><span class="st">"OpenStreetMap.Mapnik"</span>, group <span class="op">=</span> <span class="st">"Place names"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addProviderTiles.html" class="external-link">addProviderTiles</a></span><span class="op">(</span><span class="st">"Esri.WorldImagery"</span>, group <span class="op">=</span> <span class="st">"Aerial"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/map-methods.html" class="external-link">clearBounds</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addAwesomeMarkers.html" class="external-link">addAwesomeMarkers</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">fq_data</span>,</span>
<span>    lng <span class="op">=</span> <span class="op">~</span><span class="va">location_corner1_longitude</span>,</span>
<span>    lat <span class="op">=</span> <span class="op">~</span><span class="va">location_corner1_latitude</span>,</span>
<span>    icon <span class="op">=</span> <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/makeAwesomeIcon.html" class="external-link">makeAwesomeIcon</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"Q"</span>, markerColor <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span>,</span>
<span>    label <span class="op">=</span> <span class="op">~</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{location_area_name} {encounter_start_datetime}"</span><span class="op">)</span>,</span>
<span>    popup <span class="op">=</span> <span class="op">~</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span></span>
<span>      <span class="st">"&lt;h3&gt;{location_area_name}&lt;/h3&gt;"</span>,</span>
<span>      <span class="st">"Survey start {encounter_start_datetime}&lt;/br&gt;"</span>,</span>
<span>      <span class="st">"Device {device_id}&lt;/br&gt;"</span>,</span>
<span>      <span class="st">"&lt;h5&gt;Site&lt;/h5&gt;"</span>,</span>
<span>      <span class="st">'&lt;div&gt;&lt;img src="{location_quadrat_photo}"'</span>,</span>
<span>      <span class="st">' height="150px" alt="Quadrat photo"&gt;&lt;/img&gt;&lt;/div&gt;'</span>,</span>
<span>      <span class="st">"&lt;h5&gt;Mudmap&lt;/h5&gt;"</span>,</span>
<span>      <span class="st">'&lt;div&gt;&lt;img src="{perimeter_mudmap_photo}'</span>,</span>
<span>      <span class="st">' height="150px" alt="Mudmap"&gt;&lt;/img&gt;&lt;/div&gt;'</span>,</span>
<span>      <span class="st">"&lt;h5&gt;Habitat&lt;/h5&gt;"</span>,</span>
<span>      <span class="st">"Morphological type: {habitat_morphological_type}&lt;/br&gt;"</span>,</span>
<span>      <span class="st">'&lt;div&gt;&lt;img src="{habitat_morphological_type_photo}"'</span>,</span>
<span>      <span class="st">'height="150px" alt="Morphological type"&gt;&lt;/img&gt;&lt;/div&gt;'</span></span>
<span>    <span class="op">)</span>,</span>
<span>    clusterOptions <span class="op">=</span> <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/map-options.html" class="external-link">markerClusterOptions</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addLayersControl.html" class="external-link">addLayersControl</a></span><span class="op">(</span></span>
<span>    baseGroups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Place names"</span>, <span class="st">"Aerial"</span><span class="op">)</span>,</span>
<span>    options <span class="op">=</span> <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addLayersControl.html" class="external-link">layersControlOptions</a></span><span class="op">(</span>collapsed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-721d00c5fe44bd90ce1a" style="width:800px;height:600px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-721d00c5fe44bd90ce1a">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"Place names",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Aerial",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[-31.895004,115.7747006,{"icon":"home","markerColor":"red","iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","text":"Q","prefix":"glyphicon"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"<h3>\nTest 1<\/h3>Survey start 2023-12-04 16:20:19.98<\/br>Device collect:OHnydk6INUIfDHNl<\/br><h5>Site<\/h5><div><img src=\"media/1701678074209.jpg\" height=\"150px\" alt=\"Quadrat photo\"><\/img><\/div><h5>Mudmap<\/h5><div><img src=\"media/1701678512568.jpg height=\"150px\" alt=\"Mudmap\"><\/img><\/div><h5>Habitat<\/h5>Morphological type: flat<\/br><div><img src=\"media/1701678107041.jpg\"height=\"150px\" alt=\"Morphological type\"><\/img><\/div>",null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,"\nTest 1 2023-12-04 16:20:19.98",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Place names","Aerial"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"limits":{"lat":[-31.895004,-31.895004],"lng":[115.7747006,115.7747006]}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/leaflet.html" class="external-link">leaflet</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">800</span>, height <span class="op">=</span> <span class="fl">600</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addProviderTiles.html" class="external-link">addProviderTiles</a></span><span class="op">(</span><span class="st">"OpenStreetMap.Mapnik"</span>, group <span class="op">=</span> <span class="st">"Place names"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addProviderTiles.html" class="external-link">addProviderTiles</a></span><span class="op">(</span><span class="st">"Esri.WorldImagery"</span>, group <span class="op">=</span> <span class="st">"Aerial"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/map-methods.html" class="external-link">clearBounds</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addAwesomeMarkers.html" class="external-link">addAwesomeMarkers</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">fq_data_taxa</span>,</span>
<span>    lng <span class="op">=</span> <span class="op">~</span><span class="va">location_corner1_longitude</span>,</span>
<span>    lat <span class="op">=</span> <span class="op">~</span><span class="va">location_corner1_latitude</span>,</span>
<span>    icon <span class="op">=</span> <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/makeAwesomeIcon.html" class="external-link">makeAwesomeIcon</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"T"</span>, markerColor <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span>,</span>
<span>    label <span class="op">=</span> <span class="op">~</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{field_name} {encounter_start_datetime}"</span><span class="op">)</span>,</span>
<span>    popup <span class="op">=</span> <span class="op">~</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span></span>
<span>      <span class="st">"&lt;h3&gt;{field_name}&lt;/h3&gt;"</span>,</span>
<span>      <span class="st">"Survey start {encounter_start_datetime}&lt;/br&gt;"</span>,</span>
<span>      <span class="st">"Device {device_id}&lt;/br&gt;"</span>,</span>
<span>      <span class="st">"&lt;h5&gt;Taxon&lt;/h5&gt;"</span>,</span>
<span>      <span class="st">'&lt;div&gt;&lt;img src="media/{photo_in_situ}"'</span>,</span>
<span>      <span class="st">' height="150px" alt="Taxon in situ"&gt;&lt;/img&gt;&lt;/div&gt;'</span>,</span>
<span>      <span class="st">"Specimen barcode: {voucher_specimen_barcode}&lt;/br&gt;"</span>,</span>
<span>      <span class="st">"Life form: {life_form}&lt;/br&gt;"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    clusterOptions <span class="op">=</span> <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/map-options.html" class="external-link">markerClusterOptions</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addLayersControl.html" class="external-link">addLayersControl</a></span><span class="op">(</span></span>
<span>    baseGroups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Place names"</span>, <span class="st">"Aerial"</span><span class="op">)</span>,</span>
<span>    options <span class="op">=</span> <span class="fu">leaflet</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/addLayersControl.html" class="external-link">layersControlOptions</a></span><span class="op">(</span>collapsed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-b08ea8371200143e0df0" style="width:800px;height:600px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b08ea8371200143e0df0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap.Mapnik",null,"Place names",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Aerial",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[-31.895004,-31.895004],[115.7747006,115.7747006],{"icon":"home","markerColor":"green","iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","text":"T","prefix":"glyphicon"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<h3>Test species 1<\/h3>Survey start 2023-12-04 16:20:19.98<\/br>Device collect:OHnydk6INUIfDHNl<\/br><h5>Taxon<\/h5><div><img src=\"media/media/1701678535420.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: NA<\/br>Life form: w3.0_shrub<\/br>","<h3>Test species 6<\/h3>Survey start 2023-12-04 16:20:19.98<\/br>Device collect:OHnydk6INUIfDHNl<\/br><h5>Taxon<\/h5><div><img src=\"media/media/1701678592627.jpg\" height=\"150px\" alt=\"Taxon in situ\"><\/img><\/div>Specimen barcode: NA<\/br>Life form: w1.0_trees_with_dominant_genus<\/br>"],null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,["Test species 1 2023-12-04 16:20:19.98","Test species 6 2023-12-04 16:20:19.98"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Place names","Aerial"],[],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"limits":{"lat":[-31.895004,-31.895004],"lng":[115.7747006,115.7747006]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="summarising-data">Summarising data<a class="anchor" aria-label="anchor" href="#summarising-data"></a>
</h3>
<p>See Hadley Wickam’s <a href="https://r4ds.had.co.nz/exploratory-data-analysis.html" class="external-link">R for Data Science</a> for more ideas on data exploration.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># How many submissions per device?</span></span>
<span><span class="va">fq_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">meta_instance_id</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">tally</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">meta_instance_id</th>
<th align="right">n</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">uuid:46d3939a-8bc5-4084-9154-d043bc4d3239</td>
<td align="right">1</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># How many species sightings per life form?</span></span>
<span><span class="va">fq_data_taxa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">life_form</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">tally</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">life_form</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">w1.0_trees_with_dominant_genus</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">w3.0_shrub</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># GGplot of a pivot table</span></span>
<span><span class="va">fq_data_taxa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">life_form</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">tally</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">life_form</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Title"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Life form"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Abundance"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="odata-api_files/figure-html/eda-1.png" width="672"></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># GGplot with groups</span></span>
<span><span class="va">fq_data_taxa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">encounter_start_datetime</span>,</span>
<span>      y <span class="op">=</span> <span class="va">field_name</span>,</span>
<span>      colour <span class="op">=</span> <span class="va">life_form</span>,</span>
<span>      shape <span class="op">=</span> <span class="va">meta_instance_id</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Title"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Subtitle"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Observation date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Species"</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"Life form"</span>,</span>
<span>    shape <span class="op">=</span> <span class="st">"Data collection device"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="odata-api_files/figure-html/eda-2.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="export">Export<a class="anchor" aria-label="anchor" href="#export"></a>
</h2>
<p>The rectangled data can now be exported. e.g. to CSV. Note that all list columns must be either unnested or dropped before exporting to CSV.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fq_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span><span class="st">"flora_quadrats.csv"</span><span class="op">)</span></span>
<span><span class="va">fq_data_tae</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span><span class="st">"flora_quadrats_taxon_encounters.csv"</span><span class="op">)</span></span>
<span><span class="va">fq_data_veg</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span><span class="st">"flora_quadrats_vegetation_strata.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ruready-to-odk">ruReady to ODK?<a class="anchor" aria-label="anchor" href="#ruready-to-odk"></a>
</h2>
<p>In this vignette, we took a scenic tour through the general workflow of accessing and wrangling ODK Central data using <code>ruODK</code>.</p>
<p>For your convenience, <code>ruODK</code> includes a template RMarkdown workbook with the essential steps of the above workflow and colour-by-numbers instructions, which can be used as a starting point for projects using data from ODK Central.</p>
<p>To create a new RMarkdown document from the <code>ruODK</code> template, run <code>rmarkdown::draft("test.Rmd", "odata", package="ruODK")</code>.</p>
<p>Users of RStudio can alternatively “Create a new RMarkdown document” “From template” and select <code>ruODK</code>’s template “ODK Central via OData”.</p>
<p>Make sure to install a fresh version of <code>ruODK</code> to get the latest and greatest template.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>

  

  

  </body>
</html>
