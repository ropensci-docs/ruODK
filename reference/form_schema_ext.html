<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content=""><title>Show the extended schema of one form. — form_schema_ext • ruODK</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Show the extended schema of one form. — form_schema_ext"><meta property="og:description" content=""><meta property="og:image" content="https://docs.ropensci.org/ruODK/reference/figures/ruODK2.png"><meta property="og:image:alt" content="An R Client for the ODK Central API"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@florianm"><meta name="twitter:site" content="@rOpenSci"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">ruODK</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/comparison.html">Comparison of related software packages</a>
    <a class="dropdown-item" href="../articles/odata-api.html">Accessing the OData API</a>
    <a class="dropdown-item" href="../articles/restful-api.html">Accessing the RESTful API</a>
    <a class="dropdown-item" href="../articles/setup.html">Setup</a>
    <a class="dropdown-item" href="../articles/spatial.html">Spatial data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/ruODK/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Show the extended schema of one form.</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/ruODK/blob/HEAD/R/form_schema_ext.R" class="external-link"><code>R/form_schema_ext.R</code></a></small>
      <div class="d-none name"><code>form_schema_ext.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">form_schema_ext</span><span class="op">(</span></span>
<span>  flatten <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  odata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pid <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_pid</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  fid <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_fid</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  url <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_url</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  un <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_un</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  pw <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_pw</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  odkc_version <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_odkc_version</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  retries <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_retries</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_ru_verbose</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>flatten</dt>
<dd><p>Whether to flatten the resulting list of lists (<code>TRUE</code>)
or not (<code>FALSE</code>, default). Only applies to ODK Central version &lt; 0.8.</p></dd>


<dt>odata</dt>
<dd><p>Whether to sanitise the field names to match the way they will
be outputted for OData. While the original field names as given in the
XForms definition may be used as-is for CSV output, OData has some
restrictions related to the domain-qualified identifier syntax it uses.
Only applies to ODK Central version &lt; 0.8.
Default: <code>FALSE</code>.</p></dd>


<dt>parse</dt>
<dd><p>Whether to parse the form schema into a tibble of form field
type and name. This uses <code><a href="form_schema_parse.html">form_schema_parse</a></code> internally.
If used together with <code>flatten=TRUE</code>, <code><a href="form_schema.html">form_schema</a></code> will raise
a warning and return the unparsed, flattened form schema.
Only applies to ODK Central version &lt; 0.8.
Default: TRUE.</p></dd>


<dt>pid</dt>
<dd><p>The numeric ID of the project, e.g.: 2.</p>
<p>Default: <code><a href="ru_settings.html">get_default_pid</a></code>.</p>
<p>Set default <code>pid</code> through <code>ru_setup(pid="...")</code>.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>fid</dt>
<dd><p>The alphanumeric form ID, e.g. "build_Spotlighting-0-8_1559885147".</p>
<p>Default: <code><a href="ru_settings.html">get_default_fid</a></code>.</p>
<p>Set default <code>fid</code> through <code>ru_setup(fid="...")</code>.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>url</dt>
<dd><p>The ODK Central base URL without trailing slash.</p>
<p>Default: <code><a href="ru_settings.html">get_default_url</a></code>.</p>
<p>Set default <code>url</code> through <code>ru_setup(url="...")</code>.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>un</dt>
<dd><p>The ODK Central username (an email address).
Default: <code><a href="ru_settings.html">get_default_un</a></code>.
Set default <code>un</code> through <code>ru_setup(un="...")</code>.
See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>pw</dt>
<dd><p>The ODK Central password.
Default: <code><a href="ru_settings.html">get_default_pw</a></code>.
Set default <code>pw</code> through <code>ru_setup(pw="...")</code>.
See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>odkc_version</dt>
<dd><p>The ODK Central version as a semantic version string
(year.minor.patch), e.g. "2023.5.1". The version is shown on ODK Central's
version page <code>/version.txt</code>. Discard the "v".
<code>ruODK</code> uses this parameter to adjust for breaking changes in ODK Central.</p>
<p>Default: <code><a href="ru_settings.html">get_default_odkc_version</a></code> or "2023.5.1" if unset.</p>
<p>Set default <code>get_default_odkc_version</code> through
<code>ru_setup(odkc_version="2023.5.1")</code>.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>retries</dt>
<dd><p>The number of attempts to retrieve a web resource.</p>
<p>This parameter is given to <code><a href="https://httr.r-lib.org/reference/RETRY.html" class="external-link">RETRY</a>(times = retries)</code>.</p>
<p>Default: 3.</p></dd>


<dt>verbose</dt>
<dd><p>Whether to display debug messages or not.</p>
<p>Read <code><a href="../articles/setup.html">vignette("setup", package = "ruODK")</a></code> to learn how <code>ruODK</code>'s
verbosity can be set globally or per function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A tibble containing the form definition.
For ODK Central 0.8, and with default parameters
(<code>parse=TRUE</code>) for ODK Central 0.7, <code><a href="form_schema.html">form_schema</a></code> returns
a tibble with the columns:</p>


<ul><li><p><code>name</code> The field name as given in the form schema.</p></li>
<li><p><code>type</code> The field type, e.g. "string", "select1", etc.</p></li>
<li><p><code>path</code> The XForms path of the field,</p></li>
<li><p><code>ruodk_name</code> The predicted field name as generated by
<code><a href="odata_submission_get.html">odata_submission_get</a></code>, prefixed by the path, additionally
cleaned with <code><a href="https://sfirke.github.io/janitor/reference/make_clean_names.html" class="external-link">make_clean_names</a></code> to match the
cleaned column names from <code><a href="odata_submission_rectangle.html">odata_submission_rectangle</a></code>.</p></li>
<li><p><code>label</code> The field label as given in the form schema.
If specific languages are available,
this column will return the <code>default</code> language or it will be empty
if this is not specified.</p></li>
<li><p><code>label_lang</code> The field label in languange <em>_lang</em> as
given in the form schema.</p></li>
<li><p><code>choices</code> A list of lists containing at least <code>values</code> and,
if available, <code>labels</code> of the choices as given in the form schema.
If specific languages are available, this column will return the
<code>default</code> language or it will be empty if this is not specified.
Please notice that whenever choice filters are applied, this will return
the unfiltered choice list.</p></li>
<li><p><code>choices_lang</code> A list of lists containing at least
<code>values</code> and, if available, <code>labels</code> of the choices in language
<em>_lang</em> as given in the form schema.
Please notice that whenever choice filters are applied, this will return
the unfiltered choice list.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>ODK Central has introduced a new API endpoint in version 0.8 which
returns a parsed and flattened list of fields. This replaces the nested
form schema which is challenging to parse. This list is returned
by <code><a href="form_schema.html">form_schema</a></code>.</p>
<p>However this still misses important elements, in particular <code>labels</code> and
<code>choice_lists</code>.</p>
<p><code>form_schema_ext</code> returns the same object as
<code><a href="form_schema.html">form_schema</a></code>
adding <code>labels</code> and <code>choice lists</code> in all languages available.
This is done by using the return object from <code><a href="form_xml.html">form_xml</a></code>.</p>
<p>It has the exact function signature as <code><a href="form_schema.html">form_schema</a></code>.
In that sense, any call to <code><a href="form_schema.html">form_schema</a></code> can be replaced
by <code>form_schema_ext</code></p>
<p>This function, however, has been prepared with ODK Central version 0.8 or
higher. If you use it with an earlier version, a warning will be given.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://docs.getodk.org/central-api-form-management/#getting-form-schema-fields" class="external-link">https://docs.getodk.org/central-api-form-management/#getting-form-schema-fields</a></p>
<p><a href="https://docs.getodk.org/central-api-form-management/#retrieving-form-xml" class="external-link">https://docs.getodk.org/central-api-form-management/#retrieving-form-xml</a></p>
<p>Other form-management: 
<code><a href="form_detail.html">form_detail</a>()</code>,
<code><a href="form_list.html">form_list</a>()</code>,
<code><a href="form_schema.html">form_schema</a>()</code>,
<code><a href="form_xml.html">form_xml</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># See vignette("setup") for setup and authentication options</span></span></span>
<span class="r-in"><span><span class="co"># ruODK::ru_setup(svc = "....svc", un = "me@email.com", pw = "...")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With current ODK Central (&gt;0.7)</span></span></span>
<span class="r-in"><span><span class="co"># get extended schema:</span></span></span>
<span class="r-in"><span><span class="va">fsx</span> <span class="op">&lt;-</span> <span class="fu">form_schema_ext</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print choice list in english:</span></span></span>
<span class="r-in"><span><span class="va">fsx</span><span class="op">[</span><span class="va">fsx</span><span class="op">$</span><span class="va">name</span> <span class="op">==</span> <span class="st">"test_yn"</span>, <span class="st">"choices_english_(en)"</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># view the extended schema:</span></span></span>
<span class="r-in"><span><span class="va">fsx</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

