<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content=""><title>Export all form submissions including repeats and attachments to CSV. — submission_export • ruODK</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Export all form submissions including repeats and attachments to CSV. — submission_export"><meta property="og:description" content=""><meta property="og:image" content="https://docs.ropensci.org/ruODK/reference/figures/ruODK2.png"><meta property="og:image:alt" content="An R Client for the ODK Central API"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@florianm"><meta name="twitter:site" content="@rOpenSci"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">ruODK</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/comparison.html">Comparison of related software packages</a>
    <a class="dropdown-item" href="../articles/odata-api.html">Accessing the OData API</a>
    <a class="dropdown-item" href="../articles/restful-api.html">Accessing the RESTful API</a>
    <a class="dropdown-item" href="../articles/setup.html">Setup</a>
    <a class="dropdown-item" href="../articles/spatial.html">Spatial data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/ruODK/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Export all form submissions including repeats and attachments to CSV.</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/ruODK/blob/HEAD/R/submission_export.R" class="external-link"><code>R/submission_export.R</code></a></small>
      <div class="d-none name"><code>submission_export.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing" class="external-link"><img src="figures/lifecycle-maturing.svg" alt="[Maturing]"></a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">submission_export</span><span class="op">(</span></span>
<span>  local_dir <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  media <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  repeats <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pid <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_pid</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  fid <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_fid</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  url <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_url</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  un <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_un</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  pw <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_pw</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  pp <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_pp</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  retries <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_retries</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  odkc_version <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_default_odkc_version</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="fu"><a href="ru_settings.html">get_ru_verbose</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>local_dir</dt>
<dd><p>The local folder to save the downloaded files to,
default: <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here::here</a></code>.</p></dd>


<dt>overwrite</dt>
<dd><p>Whether to overwrite previously downloaded zip files,
default: FALSE</p></dd>


<dt>media</dt>
<dd><p>Whether to include media attachments, default: TRUE.
This feature only has effect on ODK Central v1.1 and higher.
Setting this feature to FALSE with an odkc_version &lt; 1.1 and will display a
verbose noop message, but still return all media attachments.</p></dd>


<dt>repeats</dt>
<dd><p>Whether to include repeat data (if TRUE), or whether
to return the root table only (FALSE). Default: TRUE.
Requesting <code>repeats=FALSE</code> will also omit any media, and override the
parameter <code>media</code>.
Setting this feature to FALSE with an odkc_version &lt; 1.1 and will display a
verbose noop message, but still include all repeat data.</p></dd>


<dt>pid</dt>
<dd><p>The numeric ID of the project, e.g.: 2.</p>
<p>Default: <code><a href="ru_settings.html">get_default_pid</a></code>.</p>
<p>Set default <code>pid</code> through <code>ru_setup(pid="...")</code>.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>fid</dt>
<dd><p>The alphanumeric form ID, e.g. "build_Spotlighting-0-8_1559885147".</p>
<p>Default: <code><a href="ru_settings.html">get_default_fid</a></code>.</p>
<p>Set default <code>fid</code> through <code>ru_setup(fid="...")</code>.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>url</dt>
<dd><p>The ODK Central base URL without trailing slash.</p>
<p>Default: <code><a href="ru_settings.html">get_default_url</a></code>.</p>
<p>Set default <code>url</code> through <code>ru_setup(url="...")</code>.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>un</dt>
<dd><p>The ODK Central username (an email address).
Default: <code><a href="ru_settings.html">get_default_un</a></code>.
Set default <code>un</code> through <code>ru_setup(un="...")</code>.
See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>pw</dt>
<dd><p>The ODK Central password.
Default: <code><a href="ru_settings.html">get_default_pw</a></code>.
Set default <code>pw</code> through <code>ru_setup(pw="...")</code>.
See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>pp</dt>
<dd><p>The passphrase for an encrypted form.</p>
<p>Default: NULL.</p>
<p>Passphrases can be stored e.g. as environment variables.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>retries</dt>
<dd><p>The number of attempts to retrieve a web resource.</p>
<p>This parameter is given to <code><a href="https://httr.r-lib.org/reference/RETRY.html" class="external-link">RETRY</a>(times = retries)</code>.</p>
<p>Default: 3.</p></dd>


<dt>odkc_version</dt>
<dd><p>The ODK Central version as a semantic version string
(year.minor.patch), e.g. "2023.5.1". The version is shown on ODK Central's
version page <code>/version.txt</code>. Discard the "v".
<code>ruODK</code> uses this parameter to adjust for breaking changes in ODK Central.</p>
<p>Default: <code><a href="ru_settings.html">get_default_odkc_version</a></code> or "2023.5.1" if unset.</p>
<p>Set default <code>get_default_odkc_version</code> through
<code>ru_setup(odkc_version="2023.5.1")</code>.</p>
<p>See <code>vignette("Setup", package = "ruODK")</code>.</p></dd>


<dt>verbose</dt>
<dd><p>Whether to display debug messages or not.</p>
<p>Read <code><a href="../articles/setup.html">vignette("setup", package = "ruODK")</a></code> to learn how <code>ruODK</code>'s
verbosity can be set globally or per function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The absolute path to the exported ZIP file named after the form ID.
The exported ZIP file will have the extension <code>.zip</code> unless only the
root table was requested (with <code>repeats=FALSE</code>), in which case the
exported file will have the extension <code>.csv</code>.
In contrast to ODK Central, which exports to <code>submissions.csv(.zip)</code>,
the exported ZIP file is named after
the form to avoid accidentally overwriting the ZIP export from
another form.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function exports all the Submission data associated with a Form as one
zip file containing one or more CSV files, as well as all multimedia
attachments associated with the included Submissions.</p>
<p>For an incremental download of a subset of submissions, use
<code><a href="submission_list.html">submission_list</a></code> or <code><a href="odata_submission_get.html">odata_submission_get</a></code> with
filter queries.</p><div class="section">
<h3 id="contents">Contents<a class="anchor" aria-label="anchor" href="#contents"></a></h3>


<p>The inclusion of subtables (from repeating form groups) can be toggled
through <code>repeats</code>, whereas the inclusion of media attachments can be toggled
through <code>media</code>.</p>
</div>

<div class="section">
<h3 id="download-location">Download location<a class="anchor" aria-label="anchor" href="#download-location"></a></h3>


<p>The file will be downloaded to the project root unless specified otherwise
(via <code>local_dir</code>). Subsequently, the zip file can be extracted.
Attachment filenames (e.g. "12345.jpg") should be prepended with <code>media</code>
(resulting in e.g. <code>media/12345.jpg</code>) in order to represent the relative
path to the actual attachment file (as extracted from the zip file).</p>
</div>

<div class="section">
<h3 id="encryption">Encryption<a class="anchor" aria-label="anchor" href="#encryption"></a></h3>


<p>ODK Central supports two modes of encryption - learn about them
<a href="https://docs.getodk.org/central-api-encryption/" class="external-link">here</a>.
<code>ruODK</code> supports project managed encryption, however the support is limited
to exactly one encryption key. The supplied passphrase will be used against
the first returned encryption key. Remaining encryption keys are ignored by
<code>ruODK</code>.</p>
<p>If an incorrect passphrase is given, the request is terminated immediately.
It has been reported that multiple requests with incorrect passphrases
can crash ODK Central.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://docs.getodk.org/central-api-submission-management/#exporting-form-submissions-to-csv" class="external-link">https://docs.getodk.org/central-api-submission-management/#exporting-form-submissions-to-csv</a></p>
<p>Other submission-management: 
<code><a href="attachment_list.html">attachment_list</a>()</code>,
<code><a href="encryption_key_list.html">encryption_key_list</a>()</code>,
<code><a href="submission_audit_get.html">submission_audit_get</a>()</code>,
<code><a href="submission_detail.html">submission_detail</a>()</code>,
<code><a href="submission_get.html">submission_get</a>()</code>,
<code><a href="submission_list.html">submission_list</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># See vignette("setup") for setup and authentication options</span></span></span>
<span class="r-in"><span><span class="co"># ruODK::ru_setup(svc = "....svc", un = "me@email.com", pw = "...")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">se</span> <span class="op">&lt;-</span> <span class="fu">submission_export</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Unzip and inspect the loot</span></span></span>
<span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></span><span class="op">(</span><span class="va">se</span>, exdir <span class="op">=</span> <span class="va">t</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html" class="external-link">dir_ls</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fid</span> <span class="op">&lt;-</span> <span class="fu"><a href="ru_settings.html">get_test_fid</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sub</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">t</span>, <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{fid}.csv"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sub</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

